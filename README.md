# Profile
Generated by [Rojo](https://github.com/rojo-rbx/rojo) 7.3.0.

## Wally Installation
To install with wally, insert it above wally.toml [dependecies]
```toml
ProfileStore = "ernisto/ProfileStore"
```

## Usage
All behaviors has explained in [Unit Tests WIP](src/Profile/init.spec.lua)
```lua
local playersProfileStore = ProfileStore.get("Players") -- cached

local ernistoProfile = playersProfileStore:get("ernisto malvadao")  -- cached too
local activation = profile:activateAsync()    -- mutable data

player.AncestryChanged:Once(function()
    
    if activation:await() then profile:releaseAsync() end
end)

activation:andThen(function()
    
    local guildProfile = playersProfileStore:get(ernistoProfile.data.guildId)
    guildProfile:loadAsync():expect()  -- readonly data
    
    guildProfile.data.a = 10
    guildProfile:overwrite()
    
    local globalUpdate = guildProfile:activateUpdate("memberJoined", { member = "ernisto" })
    player.Destroying:Once(function() globalUpdate:clear() end)
end)

function teleport()
    
    profile:releaseAsync()  -- recommended before remove player (such teleport the player)
        :andThenCall(TeleportService.TeleportAsync, TeleportService, players.ernisto)
end
```
